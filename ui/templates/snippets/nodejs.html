<span class="kwd">const</span> <span class="var">axios</span> <span class="opr">=</span> <span class="sfn">require</span><span class="brc">(</span><span class="pct">'</span><span class="str">axios</span><span class="pct">'</span><span class="brc">)</span><span class="sep">;</span>
<span class="kwd">const</span> <span class="var">qs</span> <span class="opr">=</span> <span class="sfn">require</span><span class="brc">(</span><span class="pct">'</span><span class="str">qs</span><span class="pct">'</span><span class="brc">)</span><span class="sep">;</span>       <span class="cmt">// You might need to install 'qs'</span>
<span class="kwd">const</span> <span class="var">url</span> <span class="opr">=</span> <span class="pct">'</span><span class="str">{{ @apiUrl }}</span><span class="pct">'</span><span class="sep">;</span>      <span class="cmt">// sensor URL</span>
<span class="kwd">const</span> <span class="var">headers</span> <span class="opr">=</span> <span class="brc">{</span>
    <span class="pct">'</span><span class="str">Content-Type</span><span class="pct">'</span><span class="opr">:</span> <span class="pct">'</span><span class="str">application/x-www-form-urlencoded</span><span class="pct">'</span><span class="sep">,</span>
    <span class="pct">'</span><span class="str">Api-Key</span><span class="pct">'</span><span class="opr">:</span> <span class="pct">'</span><span class="str">{{ @apiKey }}</span><span class="pct">'</span> <span class="cmt">// Tracking ID</span>
<span class="brc">}</span><span class="sep">;</span>
<span class="cmt">// Replace each key value with actual info</span>
<span class="kwd">const</span> <span class="var">data</span> <span class="opr">=</span> <span class="brc">{</span>
    <span class="cmt">/////////// Required fields ///////////</span>
    <span class="cmt">// Unique value that allows identification of a user. Ex: alice54 (string)</span>
    <span class="ent">userName</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">// User IP address (string)</span>
    <span class="ent">ipAddress</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">// URL path of visited page (string)</span>
    <span class="ent">url</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">// User-agent of user request (string)</span>
    <span class="ent">userAgent</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">// Event UTC timestamp ('Y-m-d H:i:s.v' string)</span>
    <span class="ent">eventTime</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">/////////// Optional fields ///////////</span>
    <span class="cmt">// User email (string)</span>
    <span class="ent">emailAddress</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">// User first name (string)</span>
    <span class="ent">firstName</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">// User last name (string)</span>
    <span class="ent">lastName</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">// User full name (string)</span>
    <span class="ent">fullName</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">// Title of visited page (string)</span>
    <span class="ent">pageTitle</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">// User phone number (string)</span>
    <span class="ent">phoneNumber</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">// Referer of visited page (string)</span>
    <span class="ent">httpReferer</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">// Status code for page visit (string)</span>
    <span class="ent">httpCode</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">// User browser language (string)</span>
    <span class="ent">browserLanguage</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">// Type of user action from event types list (string)</span>
    <span class="cmt">// For ex. 'page_view', 'field_edit', etc.</span>
    <span class="ent">eventType</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">// Type of HTTP request from list (string)</span>
    <span class="ent">httpMethod</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">// User created UTC timestamp ('Y-m-d H:i:s' string)</span>
    <span class="ent">userCreated</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>
    <span class="cmt">// Payload, must have `page_search` or `account_email_change` event type (array)</span>
    <span class="ent">payload</span><span class="opr">:</span> <span class="brc">[</span><span class="brc">]</span><span class="sep">,</span>
    <span class="cmt">// Field history, must have `field_edit` event type (array)</span>
    <span class="ent">fieldHistory</span><span class="opr">:</span> <span class="brc">[</span>
        <span class="brc">{</span>
            <span class="ent">field_name</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>     <span class="cmt">// Name of the field</span>
            <span class="ent">field_id</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>       <span class="cmt">// ID of the field</span>
            <span class="ent">new_value</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>      <span class="cmt">// Field new value</span>
            <span class="ent">old_value</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span><span class="sep">,</span>      <span class="cmt">// Field old value</span>
            <span class="ent">parent_id</span><span class="opr">:</span> <span class="pct">'</span><span class="pct">'</span>       <span class="cmt">// ID of the field parent</span>
        <span class="brc">}</span>
    <span class="brc">]</span><span class="sep">,</span>
<span class="brc">}</span><span class="sep">;</span>
<span class="var">axios</span><span class="acc">.</span><span class="sfn">post</span><span class="brc">(</span><span class="var">url</span><span class="sep">,</span> <span class="var">qs</span><span class="acc">.</span><span class="sfn">stringify</span><span class="brc">(</span><span class="var">data</span><span class="brc">)</span><span class="sep">,</span> <span class="brc">{</span> <span class="ent">headers</span><span class="opr">:</span> <span class="var">headers</span> <span class="brc">}</span><span class="brc">)</span><span class="sep">;</span>
